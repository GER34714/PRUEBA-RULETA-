<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FORTUNA PLAYâ„¢</title>
<style>
body{margin:0;font-family:Arial Black,sans-serif;text-align:center;color:#fff;background:linear-gradient(135deg,#4b0082,#ff00ff,#00ff00,#ff9900);background-size:400% 400%;animation:gradientBG 15s ease infinite}
@keyframes gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
h1{font-size:2rem;margin:10px 0}
button{margin:10px;padding:12px 30px;font-size:1.2rem;border:none;border-radius:50px;cursor:pointer;transition:.3s}
#btnPremio{background:#ff0;color:#4b0082;display:none}
#btnUsuario{background:#25D366;color:#fff;display:none}
#btnPremio:hover,#btnUsuario:hover{transform:scale(1.1)}
canvas#wheelCanvas{width:90%;max-width:400px;height:auto;margin:20px auto;display:block}
</style>
</head>
<body>
<h1>ðŸŽ¡ Rueda de la Fortuna ðŸŽ¡</h1>
<img src="https://iili.io/KK0Gdb4.md.webp" style="width:200px;margin:10px auto;display:block">
<canvas id="wheelCanvas" width="400" height="400"></canvas>
<button id="spinButton">GIRAR</button>
<button id="btnPremio"></button>
<button id="btnUsuario"></button>
<script>
const prizes=["300 fichas","500 fichas","100 fichas","15% extra","25% extra","30% extra","200 fichas","Â¡Sigue participando!"];
const cashiers=[{nombre:'Martin',num:'5491132525913'},{nombre:'Lucas',num:'5491171334027'},{nombre:'Cami',num:'5491156349123'},{nombre:'Octavio',num:'5491173566830'},{nombre:'Joaki',num:'5491123365501'},{nombre:'Facu',num:'5491125127839'},{nombre:'Ale',num:'5492615027973'}];
let userCashier=JSON.parse(localStorage.getItem('userCashier'))||null,usedCashiers=JSON.parse(localStorage.getItem('usedCashiers'))||[],rotatingIndex=parseInt(localStorage.getItem('rotatingIndex')||"0",10);
function assignCashier(){if(userCashier)return userCashier;const available=cashiers.filter((_,i)=>!usedCashiers.includes(i));let chosenIndex;if(!available.length){usedCashiers=[];localStorage.setItem('usedCashiers',JSON.stringify(usedCashiers));return assignCashier()}else chosenIndex=cashiers.indexOf(available[Math.floor(Math.random()*available.length)]);usedCashiers.push(chosenIndex);localStorage.setItem('usedCashiers',JSON.stringify(usedCashiers));userCashier=cashiers[chosenIndex];localStorage.setItem('userCashier',JSON.stringify(userCashier));return userCashier}
function assignRotatingCashier(){const c=cashiers[rotatingIndex];rotatingIndex=(rotatingIndex+1)%cashiers.length;localStorage.setItem('rotatingIndex',rotatingIndex);return c}
const canvas=document.getElementById('wheelCanvas'),ctx=canvas.getContext('2d'),wheelRadius=canvas.width/2;let angle=0;
function drawWheel(){const num=prizes.length,arc=2*Math.PI/num;ctx.clearRect(0,0,canvas.width,canvas.height);for(let i=0;i<num;i++){const start=i*arc,end=start+arc;ctx.beginPath();ctx.moveTo(wheelRadius,wheelRadius);ctx.arc(wheelRadius,wheelRadius,wheelRadius,start+angle,end+angle);ctx.fillStyle=i%2===0?'#ffcc00':'#ff66cc';ctx.fill();ctx.strokeStyle='#fff';ctx.lineWidth=2;ctx.stroke();ctx.save();ctx.translate(wheelRadius,wheelRadius);ctx.rotate(start+arc/2+angle);ctx.fillStyle='#000';ctx.font='bold 20px Arial';ctx.textAlign='center';ctx.fillText(`${i+1}`,wheelRadius/2,10);ctx.restore()}}
drawWheel();
document.getElementById('spinButton').addEventListener('click',()=>{const assignedCashier=assignCashier(),spinAngle=Math.random()*Math.PI*4+Math.PI*4,duration=3000,start=performance.now(),startAngle=angle;function animate(time){let elapsed=time-start;if(elapsed>duration)elapsed=duration;const progress=elapsed/duration;angle=startAngle+spinAngle*(1-Math.pow(1-progress,3));drawWheel();if(elapsed<duration)requestAnimationFrame(animate);else finishSpin()}function finishSpin(){const num=prizes.length,sector=Math.floor((angle%(2*Math.PI))/(2*Math.PI/num)),prize=prizes[(num-sector+num)%num];alert(`Â¡Ganaste: ${prize}!`);const nowDate=new Date().toLocaleString();const btnPremio=document.getElementById('btnPremio'),btnUsuario=document.getElementById('btnUsuario');btnPremio.style.display='none';btnUsuario.style.display='none';if(prize==='Â¡Sigue participando!'){const c=assignRotatingCashier();btnUsuario.textContent='Quiero mi usuario';btnUsuario.style.display='inline-block';btnUsuario.onclick=()=>{window.open(`https://wa.me/${c.num}?text=Hola ${c.nombre}, quiero mi usuario`,'_blank')}}else{btnPremio.textContent='Solicitar premio';btnPremio.style.display='inline-block';btnPremio.onclick=()=>{window.open(`https://wa.me/${assignedCashier.num}?text=Hola ${assignedCashier.nombre}, quiero recibir el premio "${prize}" ganado el ${nowDate}"`,'_blank')}}}requestAnimationFrame(animate)});
</script>
</body>
</html>
