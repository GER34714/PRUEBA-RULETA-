function getAssignedCashier() {
  let userData = JSON.parse(localStorage.getItem('userData')) || {};
  if(userData.assignedCashier) return userData.assignedCashier;

  let usedCashiers = JSON.parse(localStorage.getItem('usedCashiers')) || [];
  let remaining = cashiers.filter(c => !usedCashiers.includes(c.nombre));

  if(remaining.length === 0) {
    usedCashiers = [];
    shuffle(cashiers);
    remaining = [...cashiers];
  }

  const assigned = remaining[Math.floor(Math.random()*remaining.length)];
  usedCashiers.push(assigned.nombre);
  localStorage.setItem('usedCashiers', JSON.stringify(usedCashiers));

  userData.assignedCashier = assigned;
  localStorage.setItem('userData', JSON.stringify(userData));
  return assigned;
}
