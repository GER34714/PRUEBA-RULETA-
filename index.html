<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FORTUNA PLAY™ - Neon</title>
<style>
body{margin:0;font-family:Arial Black,sans-serif;text-align:center;color:#fff;background:#000;overflow-x:hidden;}
#neonTop,#neonBottom{position:relative;display:inline-block;margin:10px auto;padding:10px;border-radius:15px;}
.neonLight{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:15px;background:linear-gradient(270deg,#ff00ff,#00ffff,#ff9900,#ff00ff,#00ffff,#ff9900);background-size:1200% 1200%;z-index:-1;animation:neonAnim 10s ease infinite;}
@keyframes neonAnim{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
#logoTop{width:360px;margin:10px auto;position:relative;z-index:1}
#finalImage{width:180px;margin:5px auto;position:relative;z-index:1}
canvas#wheelCanvas{width:90%;max-width:400px;height:auto;margin:10px auto;display:block}
#arrow{position:absolute;top:50%;left:50%;transform:translate(-50%,-95%);width:0;height:0;border-left:15px solid transparent;border-right:15px solid transparent;border-bottom:30px solid #fff;z-index:10}
#subtitle{font-size:1.5rem;margin:5px 0;color:#ff0;font-weight:bold;text-shadow:0 0 5px #fff,0 0 10px #ff0,0 0 15px #f0f;animation:neonSubtitle 1.5s ease-in-out infinite alternate}
@keyframes neonSubtitle{from{text-shadow:0 0 5px #fff,0 0 10px #ff0,0 0 15px #f0f}to{text-shadow:0 0 10px #fff,0 0 20px #ff0,0 0 25px #f0f}}
button{margin:10px;padding:12px 30px;font-size:1.1rem;border:none;border-radius:50px;cursor:pointer;transition:.3s}
#spinButton{background:#ff0;color:#4b0082}
#winnerPopup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);background:rgba(0,0,0,0.9);padding:20px 25px;border-radius:15px;color:#fff;font-size:1.4rem;font-weight:bold;text-align:center;z-index:1000;transition:transform 0.5s cubic-bezier(0.68,-0.55,0.27,1.55)}
#winnerPopup.show{transform:translate(-50%,-50%) scale(1);animation:winnerBounce 0.8s ease forwards}
@keyframes winnerBounce{0%{transform:translate(-50%,-50%) scale(0);}50%{transform:translate(-50%,-50%) scale(1.2);}70%{transform:translate(-50%,-50%) scale(0.95);}100%{transform:translate(-50%,-50%) scale(1);}}
#winnerButton{margin-top:15px;padding:12px 25px;font-size:1.2rem;border-radius:50px;background:#25D366;color:#fff;cursor:pointer;border:none;transition:.3s}
#winnerButton:hover{transform:scale(1.08)}
#legal{font-size:0.9rem;margin:2px 0;color:#fff}
#rights{font-size:0.9rem;margin-bottom:5px;color:#fff}
canvas#confetti{position:absolute;top:0;left:0;pointer-events:none;width:100%;height:100%}
</style>
</head>
<body>
<div id="neonTop"><div class="neonLight"></div><img id="logoTop" src="https://iili.io/KK0Gdb4.md.webp" alt="Logo FORTUNA PLAY"></div>
<div id="subtitle">¡Animate a girar, es tu momento de brillar!</div>

<div id="arrow"></div>
<canvas id="wheelCanvas" width="400" height="400"></canvas>
<button id="spinButton">GIRAR</button>

<div id="neonBottom"><div class="neonLight"></div><img id="finalImage" src="https://iili.io/KK0OCrl.md.png" alt="Imagen final"></div>
<div id="legal">+18 | Juego Responsable | Apuesta con moderación</div>
<div id="rights">Todos los derechos reservados FORTUNA PLAY™</div>

<div id="winnerPopup">
  <canvas id="confetti"></canvas>
  <div id="winnerMessage"></div>
  <button id="winnerButton">Solicitar premio</button>
</div>

<script>
// Rueda y premios
const prizes=["300 fichas","500 fichas","100 fichas","15% extra","25% extra","30% extra","200 fichas"];
const cashiers=[{nombre:'Martin',num:'5491132525913'},{nombre:'Lucas',num:'5491171334027'},{nombre:'Cami',num:'5491156349123'},{nombre:'Octavio',num:'5491173566830'},{nombre:'Joaki',num:'5491123365501'},{nombre:'Facu',num:'5491125127839'},{nombre:'Ale',num:'5492615027973'}];

const canvas=document.getElementById('wheelCanvas'),ctx=canvas.getContext('2d'),wheelRadius=canvas.width/2;
let angle=0;
const colors=["#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff"];
function drawWheel(){
  const num=prizes.length,arc=2*Math.PI/num;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<num;i++){
    const start=i*arc,end=start+arc;
    ctx.beginPath();ctx.moveTo(wheelRadius,wheelRadius);ctx.arc(wheelRadius,wheelRadius,wheelRadius,start+angle,end+angle);
    ctx.fillStyle=colors[i%colors.length];ctx.fill();ctx.strokeStyle='#fff';ctx.lineWidth=2;ctx.stroke();
    ctx.save();ctx.translate(wheelRadius,wheelRadius);ctx.rotate(start+arc/2+angle);ctx.fillStyle='#000';ctx.font='bold 20px Arial';ctx.textAlign='center';
    ctx.fillText(String(i+1),wheelRadius/2,10);ctx.restore();
  }
}
drawWheel();

// Confetti y popup
const spinBtn=document.getElementById('spinButton'),popup=document.getElementById('winnerPopup'),winnerMsg=document.getElementById('winnerMessage'),winnerBtn=document.getElementById('winnerButton'),confCanvas=document.getElementById('confetti'),confCtx=confCanvas.getContext('2d');confCanvas.width=popup.offsetWidth;confCanvas.height=popup.offsetHeight;let confettiParticles=[];
function launchConfetti(){confettiParticles=[];for(let i=0;i<100;i++){confettiParticles.push({x:Math.random()*confCanvas.width,y:Math.random()*confCanvas.height-50,r:Math.random()*6+2,dx:(Math.random()-0.5)*4,dy:Math.random()*4+1,color:`hsl(${Math.random()*360},100%,50%)`})}animateConfetti();}
function animateConfetti(){confCtx.clearRect(0,0,confCanvas.width,confCanvas.height);confettiParticles.forEach(p=>{p.x+=p.dx;p.y+=p.dy;if(p.y>confCanvas.height)p.y=0;confCtx.beginPath();confCtx.arc(p.x,p.y,p.r,0,Math.PI*2);confCtx.fillStyle=p.color;confCtx.fill()});if(confettiParticles.length>0){requestAnimationFrame(animateConfetti);confettiParticles=confettiParticles.filter(p=>p.y<confCanvas.height)}}

// Giro
spinBtn.addEventListener('click',()=>{
  spinBtn.style.display='none';popup.classList.remove('show');winnerBtn.style.display='none';
  const assignedCashier=cashiers[Math.floor(Math.random()*cashiers.length)];
  const spinAngle=Math.random()*Math.PI*4+Math.PI*4,duration=3000,start=performance.now(),startAngle=angle;
  function animate(time){let elapsed=time-start;if(elapsed>duration)elapsed=duration;const progress=elapsed/duration;angle=startAngle+spinAngle*(1-Math.pow(1-progress,3));drawWheel();if(elapsed<duration)requestAnimationFrame(animate);else finishSpin()}
  function finishSpin(){const num=prizes.length,sector=Math.floor((angle%(2*Math.PI))/(2*Math.PI/num)),prize=prizes[(num-sector+num)%num];winnerMsg.textContent=`Felicidades! Ganaste: ${prize}`;winnerBtn.style.display='inline-block';
  winnerBtn.onclick=()=>{const nowDate=new Date().toLocaleString();window.open(`https://wa.me/${assignedCashier.num}?text=${encodeURIComponent(`Hola ${assignedCashier.nombre}, quisiera recibir el premio "${prize}" ganado el ${nowDate}.`)}`,'_blank');popup.classList.remove('show')};
  confCanvas.width=popup.offsetWidth; confCanvas.height=popup.offsetHeight;launchConfetti();popup.classList.add('show')}
  requestAnimationFrame(animate);
});
</script>
</body>
</html>
