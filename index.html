<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rueda de la Fortunaâ„¢</title>
<style>
:root {
  --verde: #25D366; --verde-oscuro: #128C7E; --gris: #555555;
  --violeta: #7d2ae8; --dorado: #FFD700;
}
*{box-sizing:border-box;}
body { margin:0; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://iili.io/KJmu0S2.jpg') no-repeat center center fixed;
  background-size: cover; color:#fff; text-align:center;
}
.overlay{ min-height:100vh; display:flex; flex-direction:column; justify-content:flex-start; align-items:center; padding:2rem 1rem; }
h1{ font-size: clamp(2.5rem,8vw,5rem); background: linear-gradient(135deg, #FFF700, #FFD700);
 -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow:0 0 10px #FFF700,0 0 15px #FFD700;
 margin:0; padding-top:0.5rem; }
#promo{ margin:1rem 0 2rem 0; font-size:1.2rem; }
#ruleta-section{ margin: 50px auto; display:flex; flex-direction: column; align-items:center;
 background: rgba(0,0,0,0.5); padding: 2rem; border-radius: 20px; max-width: 360px; }
#ruleta-container{ position:relative; width:300px; height:300px; }
#flecha{ position:absolute; bottom:-10px; left:50%; transform:translateX(-50%); width:0; height:0;
 border-left:15px solid transparent; border-right:15px solid transparent; border-top:30px solid var(--dorado); z-index:10; }
button.btn{ display:inline-flex; align-items:center; gap:0.5rem; padding:0.8rem 1.8rem; border:none; border-radius:50px;
 font-size:clamp(0.9rem,2vw,1.2rem); font-weight:bold; color:#fff; cursor:pointer; text-align:center; transition: transform 0.2s, box-shadow 0.2s;
 max-width:300px; justify-content:center; }
.btn-green{ background: linear-gradient(135deg, var(--verde-oscuro), var(--verde));
box-shadow:0 0 10px var(--verde),0 0 20px var(--verde),0 0 30px var(--verde); animation:glow 2s infinite alternate; }
.btn-gray{ background: linear-gradient(135deg, #666,var(--gris)); padding:0.6rem 1.5rem;
box-shadow:0 0 8px #888,0 0 16px #555; }
.btn:hover{ transform: scale(1.05); box-shadow:0 0 20px var(--verde),0 0 40px var(--verde),0 0 60px var(--verde); }
@keyframes glow{0%,100{ box-shadow:0 0 10px var(--verde),0 0 20px var(--verde),0 0 30px var(--verde); }
50%{ box-shadow:0 0 20px var(--verde),0 0 40px var(--verde),0 0 60px var(--verde); } }
#premios-section{ margin:30px auto; background: rgba(0,0,0,0.4); padding: 1.5rem 2rem; border-radius: 15px; max-width:400px; text-align:left; }
#premios-section h2{ color: var(--dorado); text-align:center; margin-bottom:1rem; }
#premios-section ol{ line-height:1.8; padding-left:1.2rem; }
#popupPremio{ display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
background:#222; color:#fff; padding:30px; border-radius:15px; text-align:center; z-index:999; width:90%; max-width:400px;
box-shadow:0 0 15px rgba(0,0,0,0.7);}
#popupPremio h2{ font-size:1.8rem; margin-bottom:10px; }
#popupPremio p{ margin:5px 0; }
#confetiCanvas{ position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:998; }
#contadorRueda{ font-size:1.2rem; font-weight:bold; color:#FFD700; margin:20px 0; }
@media(max-width:600px){ #ruleta-section{max-width:90%;} h1{font-size:clamp(2rem,10vw,4rem);} }
</style>
</head>
<body>
<div class="overlay">
<h1>ğŸ¡ GIRA LA RUEDA DE LA FORTUNA Y GANÃ ğŸ¡</h1>
<div id="promo">Â¡ParticipÃ¡ y llevate increÃ­bles premios cada dÃ­a! ğŸ²ğŸ’</div>

<section id="ruleta-section">
<div id="ruleta-container">
<canvas id="ruletaCanvas" width="300" height="300"></canvas>
<div id="flecha"></div>
</div>
<button class="btn btn-green" id="girarBtn">Girar Ruleta</button>
</section>

<section id="premios-section">
<h2>Premios de la Rueda</h2>
<ol>
<li>ğŸ’ 300 fichas (c/carga mÃ­nima)</li>
<li>ğŸ’ 500 fichas (c/carga mÃ­nima)</li>
<li>ğŸ’ 100 fichas (sin carga)</li>
<li>ğŸ‰ 15% extra en tu 1ra carga</li>
<li>ğŸ‰ 25% extra en tu 2da carga</li>
<li>ğŸ‰ 30% extra en tu 3ra carga</li>
<li>ğŸ’ 200 fichas (c/carga mÃ­nima)</li>
<li>ğŸ¯ SeguÃ­ participando</li>
</ol>
</section>
</div>

<div id="popupPremio">
<h2>Â¡FELICIDADES!</h2>
<p>Reclama tu premio a tu cajero asignado</p>
<p id="premioGanado" style="font-weight:bold; font-size:1.2rem;"></p>
<p id="fechaHora"></p>
<p style="color:#FFD700;">RECORDA SACARLE CAPTURA AL PREMIO GANADO<br>TENES 5 MINUTOS PARA RECLAMARLA!</p>
<button id="reclamarBtn" class="btn btn-green" style="display:none;">Reclamar premio</button>
<button id="usuarioBtn" class="btn btn-gray" style="display:none;">QUIERO UN USUARIO</button>
</div>

<canvas id="confetiCanvas"></canvas>
<div id="contadorRueda"></div>

<script>
// Datos
const CONTACTOS=[
  {nombre:'Martin',num:'5491132525913'},
  {nombre:'Lucas',num:'5491171334027'},
  {nombre:'Cami',num:'5491156349123'},
  {nombre:'Octavio',num:'5491173566830'},
  {nombre:'Joaki',num:'5491123365501'},
  {nombre:'Facu',num:'5491125127839'},
  {nombre:'Ale',num:'5492615027973'}
];
const premios=["ğŸ’ 300 fichas (c/carga mÃ­nima)","ğŸ’ 500 fichas (c/carga mÃ­nima)","ğŸ’ 100 fichas (sin carga)","ğŸ‰ 15% extra en tu 1ra carga","ğŸ‰ 25% extra en tu 2da carga","ğŸ‰ 30% extra en tu 3ra carga","ğŸ’ 200 fichas (c/carga mÃ­nima)","ğŸ¯ SeguÃ­ participando"];
const colores=['#ffcc00','#ffd700','#ffff33','#ffee44','#ffdd11','#ffee77','#ffff88','#ffcc33'];

// Canvas y botones
const girarBtn=document.getElementById('girarBtn');
const ruletaCanvas=document.getElementById('ruletaCanvas');
const ctx=ruletaCanvas.getContext('2d');
const popupPremio=document.getElementById('popupPremio');
const premioGanado=document.getElementById('premioGanado');
const fechaHora=document.getElementById('fechaHora');
const reclamarBtn=document.getElementById('reclamarBtn');
const usuarioBtn=document.getElementById('usuarioBtn');
const confetiCanvas=document.getElementById('confetiCanvas');
const confetiCtx=confetiCanvas.getContext('2d');
confetiCanvas.width=window.innerWidth; confetiCanvas.height=window.innerHeight;

// Variables ruleta
let angulo=0; let numSectores=premios.length; let confeti=[];

// Dibujar ruleta
function dibujarRuleta(){
  const cx=ruletaCanvas.width/2, cy=ruletaCanvas.height/2, radio=ruletaCanvas.width/2-5;
  for(let i=0;i<numSectores;i++){
    const inicio=(i*(2*Math.PI/numSectores))+angulo;
    const fin=((i+1)*(2*Math.PI/numSectores))+angulo;
    ctx.beginPath(); ctx.moveTo(cx,cy); ctx.arc(cx,cy,radio,inicio,fin); ctx.closePath();
    ctx.fillStyle=colores[i%colores.length]; ctx.fill();
    ctx.save(); ctx.translate(cx,cy); ctx.rotate((inicio+fin)/2);
    ctx.fillStyle="#000"; ctx.font="bold 14px sans-serif"; ctx.textAlign="right"; ctx.fillText(i+1,radio-10,5);
    ctx.restore();
  }
}
dibujarRuleta();

// Confeti
function crearConfeti(){ confeti=[]; for(let i=0;i<150;i++){ confeti.push({x:Math.random()*confetiCanvas.width,y:Math.random()*confetiCanvas.height-confetiCanvas.height,r:Math.random()*6+4,d:Math.random()*20+10,color:`hsl(${Math.random()*360},100%,50%)`,tilt:Math.random()*10-10}); } }
function dibujarConfetiAnim(){ if(confeti.length===0) return; confetiCtx.clearRect(0,0,confetiCanvas.width,confetiCanvas.height);
confeti.forEach(c=>{ confetiCtx.beginPath(); confetiCtx.fillStyle=c.color; confetiCtx.moveTo(c.x+c.tilt,c.y); confetiCtx.lineTo(c.x+c.tilt+c.r/2,c.y+c.r); confetiCtx.lineTo(c.x+c.tilt-c.r/2,c.y+c.r); confetiCtx.closePath(); confetiCtx.fill();
c.y+=2; c.x+=Math.sin(c.y/10); if(c.y>confetiCanvas.height){ c.y=-10; c.x=Math.random()*confetiCanvas.width; }}); requestAnimationFrame(dibujarConfetiAnim); }

// Cajero asignado
function obtenerCajero(){
  let cajero=JSON.parse(localStorage.getItem("cajero"));
  if(!cajero){ cajero=CONTACTOS[Math.floor(Math.random()*CONTACTOS.length)]; localStorage.setItem("cajero",JSON.stringify(cajero)); }
  return cajero;
}

// Verificar giro diario
function puedeGirar(){
  const hoy=new Date().toISOString().slice(0,10);
  const data=JSON.parse(localStorage.getItem("giroRueda")||'{}');
  return data.fecha!==hoy;
}
function registrarGiro(){
  const hoy=new Date().toISOString().slice(0,10);
  localStorage.setItem("giroRueda",JSON.stringify({fecha:hoy}));
}

// Girar ruleta
girarBtn.onclick=()=>{
  if(!puedeGirar()){ alert("Ya giraste la ruleta hoy! Vuelve maÃ±ana."); return; }
  registrarGiro();
  girarBtn.disabled=true;

  const premioIndex=Math.floor(Math.random()*premios.length);
  const vueltas=5; const gradosPorSector=360/numSectores;
  const totalGiro=vueltas*360 + premioIndex*gradosPorSector + gradosPorSector/2;
  const startAngulo=angulo; const duracion=4000; const inicioTime=performance.now();
  function anim(timestamp){
    const elapsed=timestamp-inicioTime; const progress=Math.min(elapsed/duracion,1);
    angulo=startAngulo + (totalGiro*Math.PI/180)*progress;
    ctx.clearRect(0,0,ruletaCanvas.width,ruletaCanvas.height);
    dibujarRuleta();
    if(progress<1) requestAnimationFrame(anim);
    else mostrarPremio(premios[premioIndex]);
  }
  requestAnimationFrame(anim);
}

// Mostrar popup
function mostrarPremio(premio){
  const cajero=obtenerCajero();
  premioGanado.innerText=premio;
  fechaHora.innerText=new Date().toLocaleString();
  if(premio==="ğŸ¯ SeguÃ­ participando"){ usuarioBtn.style.display='inline-block'; reclamarBtn.style.display='none'; }
  else{ usuarioBtn.style.display='none'; reclamarBtn.style.display='inline-block'; crearConfeti(); dibujarConfetiAnim(); }
  popupPremio.style.display='block';
  reclamarBtn.onclick=()=>{ window.open(`https://wa.me/${cajero.num}?text=${encodeURIComponent(`Hola ${cajero.nombre}, quiero reclamar mi premio de hoy "${premio}" ${new Date().toLocaleString()}`)}`,'_blank'); popupPremio.style.display='none'; }
  usuarioBtn.onclick=()=>{ window.open(`https://wa.me/${cajero.num}?text=${encodeURIComponent(`Hola ${cajero.nombre}, quiero crear mi usuario ${new Date().toLocaleString()}`)}`,'_blank'); popupPremio.style.display='none'; }
}

// Contador dinÃ¡mico
const contadorEl=document.getElementById('contadorRueda');
function actualizarContadorRueda(){
  const hoy=new Date().toISOString().slice(0,10);
  let contadorData=JSON.parse(localStorage.getItem('contadorRueda'))||{};
  if(contadorData.fecha!==hoy){ contadorData={fecha:hoy, cantidad:Math.floor(Math.random()*10)+50}; }
  else{ contadorData.cantidad+=Math.floor(Math.random()*3); }
  localStorage.setItem('contadorRueda',JSON.stringify(contadorData));
  contadorEl.innerText=`${contadorData.cantidad} personas ya giraron la Rueda de la Fortuna hoy ğŸ¡ğŸ²`;
}
actualizarContadorRueda(); setInterval(actualizarContadorRueda,15000);
</script>
</body>
</html>
